(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"init",value:function(){$(document).on("click",".btn-confirm-delete-region-item-modal-trigger",(function(e){e.preventDefault();var t=$("#confirm-delete-region-item-modal");t.find(".region-item-label").text($(e.currentTarget).data("name")),t.find("#confirm-delete-region-item-button").data("id",$(e.currentTarget).data("id")),t.modal("show")})),$(document).on("click","#confirm-delete-region-item-button",(function(e){e.preventDefault();var t=$(e.currentTarget);$httpClient.make().withButtonLoading(t).post($("div[data-delete-region-item-url]").data("delete-region-item-url"),{_method:"DELETE",id:t.data("id")}).then((function(e){var n=e.data;n.error?Botble.showError(n.message):($(".wrap-table-shipping-".concat(t.data("id"))).remove(),Botble.showSuccess(n.message)),$("#confirm-delete-region-item-modal").modal("hide"),$(".wrapper-content .p-3").children().length<1&&$(".wrapper-content").hide()}))})),$(document).on("click",".btn-confirm-delete-price-item-modal-trigger",(function(e){e.preventDefault();var t=$("#confirm-delete-price-item-modal");t.find(".region-price-item-label").text($(e.currentTarget).data("name")),t.find("#confirm-delete-price-item-button").data("id",$(e.currentTarget).data("id")),t.modal("show")})),$(document).on("click","#confirm-delete-price-item-button",(function(e){e.preventDefault();var t=$(e.currentTarget);$httpClient.make().withButtonLoading(t).post($("div[data-delete-rule-item-url]").data("delete-rule-item-url"),{_method:"DELETE",id:t.data("id")}).then((function(e){var n=e.data;n.error?Botble.showError(n.message):($(".box-table-shipping-item-".concat(t.data("id"))).remove(),0===n.data.count&&$(".wrap-table-shipping-".concat(n.data.shipping_id)).remove(),Botble.showSuccess(n.message)),$("#confirm-delete-price-item-modal").modal("hide")}))}));var e=function(e,t,n,i){$(document).find(".field-has-error").removeClass("field-has-error");var a=e,r=[];"POST"!==n&&(r._method=n),$.each(t.serializeArray(),(function(e,t){"from"!==t.name&&"to"!==t.name&&"price"!==t.name||t.value&&(t.value=parseFloat(t.value.replace(",","")).toFixed(2)),r[t.name]=t.value})),i&&(r.shipping_id=i),r=Botble.unmaskInputNumber(t,r),r=$.extend({},r),$httpClient.make().withButtonLoading(a).post(t.prop("action"),r).then((function(e){var t,n,r=e.data;if(r.error)Botble.showError(r.message);else if(Botble.showSuccess(r.message),null!=r&&null!==(t=r.data)&&void 0!==t&&null!==(t=t.rule)&&void 0!==t&&t.shipping_id&&null!=r&&null!==(n=r.data)&&void 0!==n&&n.html){var o=$(".wrap-table-shipping-".concat(r.data.rule.shipping_id)),l=o.find(".box-table-shipping-item-".concat(r.data.rule.id," .p-3"));l.length?l.replaceWith(r.data.html):o.append(r.data.html),Botble.initResources()}i&&a.closest(".modal").modal("hide")}))};function t(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$httpClient.make().withButtonLoading(n).get(e,i).then((function(e){var n=e.data;n.error?Botble.showError(n.message):t.replaceWith(n.data.html)}))}$(document).on("click",".btn-save-rule",(function(t){t.preventDefault();var n=$(t.currentTarget);e(n,n.closest("form"),"PUT",null)})),$(document).on("change",".select-rule-type",(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest("form"),i=t.find("option:selected");i.data("show-from-to")?n.find(".rule-from-to-inputs").show():n.find(".rule-from-to-inputs").hide(),n.find(".unit-item-label").text(i.data("unit")),n.find(".rule-from-to-label").text(i.data("text"))})),$(document).on("keyup",".input-sync-item",(function(e){var t=$(e.currentTarget),n=t.val();n&&!isNaN(n)||(n=0),t.closest(".input-shipping-sync-wrapper").find(t.data("target")).text(Botble.numberFormat(parseFloat(n),2))})),$(document).on("keyup",".input-sync-text-item",(function(e){var t=$(e.currentTarget);t.closest(".input-shipping-sync-wrapper").find(t.data("target")).text(t.val())})),$(document).on("keyup",".input-to-value-field",(function(e){var t=$(e.currentTarget),n=t.closest(".input-shipping-sync-wrapper");t.val()?(n.find(".rule-to-value-wrap").removeClass("hidden"),n.find(".rule-to-value-missing").addClass("hidden")):(n.find(".rule-to-value-wrap").addClass("hidden"),n.find(".rule-to-value-missing").removeClass("hidden"))})),$(document).on("click",".btn-add-shipping-rule-trigger",(function(e){e.preventDefault();var t=$(e.currentTarget),n=$("#add-shipping-rule-item-modal");$("#add-shipping-rule-item-button").data("shipping-id",t.data("shipping-id")),n.find("select[name=type] option[disabled]").prop("disabled",!1),t.data("country")||n.find("select[name=type] option[value=base_on_zip_code]").prop("disabled",!0),n.find("input[name=name]").val(""),n.find("select[name=type]").val("").trigger("change"),n.find("input[name=from]").val("0"),n.find("input[name=to]").val(""),n.find("input[name=price]").val("0"),n.modal("show")})),$(document).on("click",".btn-shipping-rule-item-trigger",(function(e){e.preventDefault();var t=$(e.currentTarget),n=$("#form-shipping-rule-item-detail-modal");n.modal("show"),n.find(".modal-title strong").html(""),n.find(".modal-body").html("<div class='w-100 text-center py-3'><div class='spinner-border' role='status'>\n                    <span class='visually-hidden'>Loading...</span>\n                  </div></div>"),$httpClient.make().withButtonLoading(t).get(t.data("url")).then((function(e){var t=e.data;t.error?Botble.showError(t.message):(n.find(".modal-body").html(t.data.html),n.find(".modal-title strong").html(t.message),Botble.initResources())}))})),$(document).on("click","#save-shipping-rule-item-detail-button",(function(e){e.preventDefault();var t=$(e.currentTarget),n=$("#form-shipping-rule-item-detail-modal"),i=n.find("form"),a=i.prop("method").toLowerCase();if(["get","post","put","delete"].includes(a)){var r=new FormData(i[0]);r=Botble.unmaskInputNumber(i,r),$httpClient.make().withButtonLoading(t)[a](i.prop("action"),r).then((function(e){var t=e.data;if(t.error)Botble.showError(t.message);else{var i=$(".table-shipping-rule-".concat(t.data.shipping_rule_id));i.find(".shipping-rule-item-".concat(t.data.id)).length?i.find(".shipping-rule-item-".concat(t.data.id)).replaceWith(t.data.html):i.prepend(t.data.html),n.modal("hide"),Botble.showSuccess(t.message)}}))}else Botble.showError("This method is not supported.")})),$(document).on("click",".btn-confirm-delete-rule-item-modal-trigger",(function(e){e.preventDefault();var t=$("#confirm-delete-shipping-rule-item-modal");t.find(".item-label").text($(e.currentTarget).data("name")),t.find("#confirm-delete-shipping-rule-item-button").data("url",$(e.currentTarget).data("section")),t.modal("show")})),$(document).on("click","#confirm-delete-shipping-rule-item-button",(function(e){e.preventDefault();var t=$(e.currentTarget);$httpClient.make().withButtonLoading(t).post(t.data("url"),{_method:"DELETE"}).then((function(e){var t=e.data;if(t.error)Botble.showError(t.message);else{var n=$(".table-shipping-rule-".concat(t.data.shipping_rule_id));n.find(".shipping-rule-item-".concat(t.data.id)).length&&n.find(".shipping-rule-item-".concat(t.data.id)).fadeOut(500,(function(){$(this).remove()})),Botble.showSuccess(t.message)}$("#confirm-delete-shipping-rule-item-modal").modal("hide")}))})),Botble.select($(document).find(".select-country-search")),$(document).on("click",".btn-select-country",(function(e){e.preventDefault(),$("#select-country-modal").modal("show")})),$(document).on("click","#add-shipping-region-button",(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest(".modal-content").find("form");$httpClient.make().withButtonLoading(t).post(n.prop("action"),n.serialize()).then((function(e){var t=e.data;Botble.showSuccess(t.message),$(".wrapper-content").load("".concat(window.location.href," .wrapper-content > *")),$("#select-country-modal").modal("hide"),$(".wrapper-content").show()}))})),$(document).on("click","#add-shipping-rule-item-button",(function(t){t.preventDefault();var n=$(t.currentTarget);e(n,n.closest(".modal-content").find("form"),"POST",n.data("shipping-id"))})),$(document).on("keyup",".base-price-rule-item",(function(e){var t=$(e.currentTarget).val();t&&!isNaN(t)||(t=0),$.each($(document).find(".support-shipping .rule-adjustment-price-item"),(function(e,n){var i=$(n).closest("tr").find(".shipping-price-district").val();i&&!isNaN(i)||(i=0),$(n).text(Botble.numberFormat(parseFloat(t)+parseFloat(i)),2)}))})),$(document).on("change","select[name=shipping_rule_id].shipping-rule-id",(function(e){e.preventDefault();var t=$(e.currentTarget),n=t.closest("form"),i=n.find('select[data-type="country"]'),a=t.find("option:selected").data("country");i.length?i.val()!==a&&i.val(a).trigger("change"):(i=n.find('input[name="country"]')).length&&i.val()!==a&&i.val(a)})),$(document).on("click",".table-shipping-rule-items .shipping-rule-load-items",(function(e){e.preventDefault();var n=$(e.currentTarget),i=n.closest(".table-shipping-rule-items");t(n.attr("href"),i,n)})),$(document).on("click",".table-shipping-rule-items a.page-link",(function(e){e.preventDefault();var n=$(e.currentTarget),i=n.closest(".table-shipping-rule-items");t(n.attr("href"),i,n)})),$(document).on("change",".table-shipping-rule-items .number-record .numb",(function(e){e.preventDefault();var n=$(e.currentTarget),i=n.val();if(!isNaN(i)&&i>0){var a=n.closest(".table-shipping-rule-items"),r=a.find("thead tr th[data-column][data-dir]"),o={per_page:i};r.length&&(o.order_by=r.data("column"),o.order_dir=r.data("dir")||"DESC"),t(a.data("url"),a,n,o)}else n.val(n.attr("min")||12).trigger("change")})),$(document).on("click",".table-shipping-rule-items thead tr th[data-column]",(function(e){e.preventDefault();var n=$(e.currentTarget),i=n.data("column"),a=n.data("dir")||"ASC",r=n.closest(".table-shipping-rule-items"),o=r.find(".number-record .numb").val();a="ASC"===a?"DESC":"ASC",t(r.data("url"),r,n,{order_by:i,order_dir:a,per_page:o})}))}}],n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();$((function(){(new i).init()}))})();